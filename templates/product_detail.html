{% extends 'base.html' %}

{% load static %}

{% block content %}

<section class="section-content padding-y bg">
<div class="container">

<!-- ============================ COMPONENT 1 ================================= -->
<div class="card">
	<div class="row no-gutters">
		<aside class="col-md-6">
			<article class="gallery-wrap">
				<div class="img-big-wrap">
					<a href="{{ product.images.url }}" target="_blank" rel="noopener">
						<img src="{{ product.images.url }}" class="img-fluid" alt="{{ product.product_name }}">
					</a>
				</div>
			</article>
		</aside>
		<main class="col-md-6 border-left">
			<article class="content-body">

				<h2 class="title">{{ product.product_name }}</h2>

				<div class="rating-wrap my-3">
					<ul class="rating-stars">
						<li style="width:80%" class="stars-active">
							<i class="fa fa-star"></i> <i class="fa fa-star"></i>
							<i class="fa fa-star"></i> <i class="fa fa-star"></i>
							<i class="fa fa-star"></i>
						</li>
					</ul>
					<small class="label-rating text-muted">132 reviews</small>
				</div>

				<div class="mb-3">
					<var class="price h4">₹{{ product.price }}</var>
				</div>

				<p>{{ product.description }}</p>

				<hr>
				<hr>

				{% if product.stock > 0 %}
					<div class="product-actions border rounded p-3">
						{% if has_variations %}
							<form action="{% url 'add_cart' product.id %}" method="POST" class="w-100">
								{% csrf_token %}
								{% if colors %}
								<div class="mb-3">
									<h6>Choose Color</h6>
									<div class="btn-group btn-group-sm btn-group-toggle d-flex flex-wrap" data-toggle="buttons">
										{% for color in colors %}
										<label class="btn btn-outline-dark m-1 {% if forloop.first %}active{% endif %}" style="padding:0.35rem 0.75rem; min-width:60px;">
											<input type="radio" name="color" value="{{ color.variation_value }}" autocomplete="off" {% if forloop.first %}checked{% endif %}> {{ color.variation_value|title }}
										</label>
										{% endfor %}
									</div>
								</div>
								{% endif %}
								{% if sizes %}
								<div class="mb-3">
									<h6>Select Size</h6>
									<div class="btn-group btn-group-sm btn-group-toggle d-flex flex-wrap" data-toggle="buttons">
										{% for size in sizes %}
										<label class="btn btn-outline-dark m-1 {% if forloop.first %}active{% endif %}" style="padding:0.35rem 0.75rem; min-width:60px;">
											<input type="radio" name="size" value="{{ size.variation_value }}" autocomplete="off" {% if forloop.first %}checked{% endif %}> {{ size.variation_value|upper }}
										</label>
										{% endfor %}
									</div>
								</div>
								{% endif %}
								<div class="d-flex flex-wrap align-items-center gap-2" style="gap:12px;">
									<button type="submit" class="btn btn-dark px-4">
										<span class="text">Add to cart</span> <i class="fas fa-shopping-cart ml-1"></i>
									</button>
									{% if in_cart %}
									<a href="{% url 'cart' %}" class="btn btn-dark px-4">
										<span class="text">View in cart</span> <i class="fas fa-shopping-cart ml-1"></i>
									</a>
									{% endif %}
									<span class="badge badge-success ml-2">In Stock ({{ product.stock }})</span>
								</div>
							</form>
						{% else %}
							<div class="d-flex flex-wrap align-items-center gap-2" style="gap:12px;">
								{% if in_cart %}
									<a href="{% url 'cart' %}" class="btn btn-dark px-4">
										<span class="text">View in cart</span> <i class="fas fa-shopping-cart ml-1"></i>
									</a>
								{% else %}
									<form action="{% url 'add_cart' product.id %}" method="POST" class="d-inline">
										{% csrf_token %}
										<button type="submit" class="btn btn-dark px-4">
											<span class="text">Add to cart</span> <i class="fas fa-shopping-cart ml-1"></i>
										</button>
									</form>
								{% endif %}
								<span class="badge badge-success ml-2">In Stock ({{ product.stock }})</span>
							</div>
						{% endif %}
					</div>
				{% else %}
					<div class="d-flex flex-wrap align-items-center gap-2">
						<span class="badge badge-danger mr-2">Out of Stock</span>
					</div>
				{% endif %}

				<dl class="row mt-4">
					<dt class="col-sm-4">Category</dt>
					<dd class="col-sm-8">{{ product.category }}</dd>

					<dt class="col-sm-4">SKU</dt>
					<dd class="col-sm-8">{{ product.slug|upper }}</dd>
				</dl>

				<a href="{% url 'store' %}" class="btn btn-link px-0">← Back to Store</a>

			</article>
		</main>
	</div> <!-- row.// -->
</div> <!-- card.// -->
<!-- ============================ COMPONENT 1 END .// ================================= -->

<br>

<div class="row">
	<div class="col-md-9">
		<header class="section-heading">
			<h3>Customer Reviews </h3>  
			<p class="text-muted small">Handpicked testimonials from candle lovers</p>
		</header>

		<article class="box mb-3">
			<div class="icontext w-100">
				<img src="{% static 'images/avatars/avatar1.jpg' %}" class="img-xs icon rounded-circle" alt="Reviewer">
				<div class="text">
					<span class="date text-muted float-md-right">24.04.2024 </span>  
					<h6 class="mb-1">Mike John </h6>
				</div>
			</div>
			<div class="mt-3">
				<p>
					“Beautiful scent and packaging. The throw fills my living room without being overpowering.”
				</p>	
			</div>
		</article>

		<article class="box mb-3">
			<div class="icontext w-100">
				<img src="{% static 'images/avatars/avatar2.jpg' %}" class="img-xs icon rounded-circle" alt="Reviewer">
				<div class="text">
					<span class="date text-muted float-md-right">11.03.2024 </span>  
					<h6 class="mb-1">Harper Lee </h6>
				</div>
			</div>
			<div class="mt-3">
				<p>
					“The candle burns evenly and lasts longer than most luxury brands I’ve tried. Definitely repurchasing.”
				</p>	
			</div>
		</article>

	</div> <!-- col.// -->
</div> <!-- row.// -->


</div> <!-- container .//  -->
</section>
<!-- ========================= SECTION CONTENT END// ========================= -->

{% endblock %}