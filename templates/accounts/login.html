{% extends 'base.html' %}
{% load static %}

{% block content %}
<section class="section-content padding-y">
  <div class="container" style="max-width: 500px;">
    {% if messages %}
      {% for message in messages %}
        {% if message.tags == 'success' and 'verification email' in message|lower %}
          <div class="email-verification-card card shadow-lg mb-4" style="border: 2px solid #28a745; background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);">
            <div class="card-body text-center py-4">
              <div class="mb-3">
                <i class="fas fa-envelope fa-3x text-success"></i>
              </div>
              <h4 class="card-title text-success mb-3" style="font-weight: 600;">ðŸ“§ Check Your Email!</h4>
              <div class="alert alert-success mb-0" style="background: white; border: none; text-align: left;">
                <div style="font-size: 15px; line-height: 1.8;">
                  <strong class="d-block mb-2">âœ“ Registration Successful!</strong>
                  <div>{{ message }}</div>
                  <div class="mt-3 p-3" style="background: #f8f9fa; border-radius: 6px; border-left: 3px solid #28a745;">
                    <small class="text-muted d-block mb-1"><strong>Next Steps:</strong></small>
                    <small class="d-block">1. Check your email inbox (and spam folder)</small>
                    <small class="d-block">2. Click the verification link in the email</small>
                    <small class="d-block">3. Come back here to log in</small>
                  </div>
                </div>
              </div>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    {% endif %}
    
    <style>
      /* Mobile-specific styling for email verification message */
      @media (max-width: 768px) {
        .email-verification-card {
          margin: 15px 10px !important;
          border-width: 3px !important;
          animation: pulse 2s ease-in-out infinite;
        }
        .email-verification-card h4 {
          font-size: 20px !important;
        }
        .email-verification-card .fa-envelope {
          font-size: 48px !important;
        }
        .email-verification-card .alert {
          font-size: 14px !important;
          padding: 15px !important;
        }
      }
      
      @keyframes pulse {
        0%, 100% {
          box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.4);
        }
        50% {
          box-shadow: 0 0 0 10px rgba(40, 167, 69, 0);
        }
      }
    </style>
    
    <div class="card shadow-sm">
      <div class="card-body">
        <h3 class="card-title mb-4 text-center">Sign In</h3>
        {% if next_url %}
          <div class="alert alert-info">
            <i class="fas fa-info-circle me-2"></i>Please login to continue to checkout.
          </div>
        {% endif %}
        <form action="{% url 'accounts:login' %}" method="POST">
          {% csrf_token %}
          {% if next_url %}
            <input type="hidden" name="next" value="{{ next_url }}">
          {% endif %}
          <div class="form-group">
            <label for="id_email">Email</label>
            <input type="email" name="email" id="id_email" class="form-control" placeholder="Enter email" required>
          </div>
          <div class="form-group">
            <label for="id_password">Password</label>
            <input type="password" name="password" id="id_password" class="form-control" placeholder="Enter password" required>
          </div>
          <button type="submit" class="btn btn-dark btn-block py-2">Log in</button>
        </form>
        <div class="mt-3 text-center">
          <a href="{% url 'accounts:forgot_password' %}" class="text-muted">Forgot Password?</a>
        </div>
        <p class="mt-4 text-center">
          Don't have an account?
          <a href="{% url 'accounts:register' %}">Register</a>
        </p>
      </div>
    </div>
  </div>
</section>
{% endblock %}

